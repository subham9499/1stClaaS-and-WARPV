//_\TLV_version 1d: tl-x.org, generated by SandPiper(TM) 1.9-2018/02/11-beta
`include "sp_default.vh" //_\SV

// TODO: Structure this for Makerchip editing, (like Mandelbrot).

module toy_kernel #(
    parameter integer C_DATA_WIDTH = 512 // Data width of both input and output data
)
(
    input wire                       clk,
    input wire                       reset,
    
    output wire                      in_ready,
    input wire                       in_avail,
    input wire  [C_DATA_WIDTH-1:0]   in_data,
    
    input wire                       out_ready,
    output wire                      out_avail,
    output wire [C_DATA_WIDTH-1:0]   out_data
);

`include "toy_kernel_gen.vh"
generate //_\TLV
   // Combinational only. Connect output backpressure directly to inputs.
   assign in_ready = out_ready;
   assign out_avail = in_avail;
   
   //value[C_DATA_WIDTH/32-1:0]
   assign out_data[value * 32 +: 32] = in_data[value * 32 +: 32] + 1;
endgenerate

//_\SV
endmodule
